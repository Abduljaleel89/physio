(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{45918:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/doctor/patients",function(){return t(56642)}])},56642:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return DoctorPatientsPage}});var a=t(85893),r=t(67294),i=t(36008),l=t(39367),n=t(46435);function DoctorPatientsPage(){let{user:e,loading:s}=(0,l.a)(),[t,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),[u,m]=(0,r.useState)([]),[x,h]=(0,r.useState)([]),[v,p]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!s&&!e){window.location.href="/login";return}e&&"PHYSIOTHERAPIST"===e.role&&loadAssignedPatients()},[e,s]);let loadAssignedPatients=async()=>{var s,t;try{d(!0);let t=await n.NU.list(),a=t.data||t,r=Array.isArray(a)?a:(null==a?void 0:a.therapyPlans)||(null==a?void 0:a.data)||[],i=(r||[]).filter(s=>{var t;return s.doctorId===(null==e?void 0:e.id)||(null===(t=s.doctor)||void 0===t?void 0:t.userId)===(null==e?void 0:e.id)});m(i);let l=new Map;for(let e of i){let t=e.patientId||(null===(s=e.patient)||void 0===s?void 0:s.id);t&&!l.has(t)&&l.set(t,e.patient||{id:t,firstName:"Patient",lastName:String(t)})}h(Array.from(l.values())),c("")}catch(e){console.error("DoctorPatients load error",e),(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===403?(m([]),h([]),c("")):c(e.message||"Failed to load")}finally{d(!1)}},f=(0,r.useMemo)(()=>{let e=v.trim().toLowerCase();return(x||[]).filter(s=>{let t="".concat(s.firstName||""," ").concat(s.lastName||"").toLowerCase();return!e||t.includes(e)||String(s.id).includes(e)})},[x,v]);return s||t?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading…"})})}):e&&"PHYSIOTHERAPIST"===e.role?(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"My Patients"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Patients with therapy plans assigned to you"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{placeholder:"Search patients…",value:v,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"}),(0,a.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),o&&(0,a.jsx)("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 p-4",children:(0,a.jsx)("div",{className:"text-sm text-red-700",children:o})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:0===f.length?(0,a.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No assigned patients found"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Patients will appear here once therapy plans are assigned to you."})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:f.map(e=>{var s,t,r,i;return(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-blue-700 font-semibold text-sm",children:[(null===(t=e.firstName)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.toUpperCase())||"",(null===(i=e.lastName)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.toUpperCase())||""]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900 text-lg",children:[e.firstName," ",e.lastName]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-0.5",children:["Patient ID: ",e.id,e.regNumber&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",e.regNumber]})]})]})]})}),(0,a.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,a.jsx)("a",{href:"/doctor/patients/".concat(e.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm shadow-sm hover:shadow-md transition-all",children:"View Progress"})})]})},e.id)})})})]})}):(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"text-gray-600",children:"This page is for physiotherapists."})})}}},function(e){e.O(0,[424,8,774,888,179],function(){return e(e.s=45918)}),_N_E=e.O()}]);