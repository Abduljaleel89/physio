(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{86158:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/requests",function(){return s(40262)}])},40262:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return RequestsPage}});var r=s(85893),a=s(67294),d=s(36008),l=s(39367),n=s(46435);function RequestsPage(){let{user:e,loading:t}=(0,l.a)(),[s,i]=(0,a.useState)([]),[c,o]=(0,a.useState)("");(0,a.useEffect)(()=>{!t&&e&&load()},[t,e]);let load=async()=>{try{o("");let e=await n.WI.list(),t=e.data||e,s=Array.isArray(t)?t:(null==t?void 0:t.requests)||(null==t?void 0:t.data)||[];i(s||[])}catch(e){o(e.message||"Failed to load")}};return(0,r.jsx)(d.Z,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"My Visit Requests"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Track your appointment requests and their status."}),c&&(0,r.jsx)("div",{className:"mb-4 p-3 border border-red-200 bg-red-50 text-sm text-red-700",children:c}),(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("a",{href:"/appointments",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"New Request"})}),(0,r.jsx)("div",{className:"bg-white border rounded-lg shadow",children:0===s.length?(0,r.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No requests yet."}):(0,r.jsx)("ul",{className:"divide-y",children:s.map(e=>(0,r.jsxs)("li",{className:"p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:new Date(e.requestedAt||e.requestedDate||e.createdAt).toLocaleString()}),e.reason&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Reason: ",e.reason]}),e.doctor&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Doctor: Dr. ",e.doctor.firstName," ",e.doctor.lastName]})]}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full border ".concat("APPROVED"===e.status?"bg-green-50 text-green-700 border-green-200":"REJECTED"===e.status?"bg-red-50 text-red-700 border-red-200":"bg-yellow-50 text-yellow-800 border-yellow-200"),children:e.status})]},e.id))})})]})})}}},function(e){e.O(0,[424,8,774,888,179],function(){return e(e.s=86158)}),_N_E=e.O()}]);