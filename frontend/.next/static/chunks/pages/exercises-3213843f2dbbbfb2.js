(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{18101:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exercises",function(){return r(72294)}])},72294:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return Exercises}});var t=r(85893),a=r(67294),l=r(11163),i=r(39367),n=r(36008),d=r(46435);function Exercises(){let{user:e,loading:s}=(0,i.a)(),r=(0,l.useRouter)(),[c,o]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[m,g]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)({name:"",description:"",instructions:"",difficulty:"BEGINNER",duration:""}),[N,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!s&&(!e||"PATIENT"===e.role)){r.push("/dashboard");return}e&&loadExercises()},[e,s,r]);let loadExercises=async()=>{try{let e=await d.Ak.list();if(e.success){let s=e.data,r=Array.isArray(s)?s:(null==s?void 0:s.exercises)||(null==s?void 0:s.data)||[];o(r)}}catch(e){g(e.message||"Failed to load exercises")}finally{x(!1)}};if(s||u)return(0,t.jsx)(n.Z,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})})});if(!e||"PATIENT"===e.role)return null;let handleCreateExercise=async e=>{e.preventDefault(),g(""),h("");try{let e=new FormData;e.append("name",y.name),e.append("difficulty",y.difficulty),y.description&&e.append("description",y.description),y.instructions&&e.append("instructions",y.instructions),y.duration&&e.append("duration",y.duration),N&&e.append("video",N);let s=await d.Ak.create(e);s.success&&(h("Exercise created successfully!"),v({name:"",description:"",instructions:"",difficulty:"BEGINNER",duration:""}),j(null),b(!1),loadExercises())}catch(e){var s,r;g((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)||"Failed to create exercise")}},getDifficultyColor=e=>{switch(e){case"BEGINNER":return"bg-green-100 text-green-800 border-green-200";case"INTERMEDIATE":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"ADVANCED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Exercises"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your exercise library"})]}),(0,t.jsx)("button",{onClick:()=>b(!p),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:p?"Cancel":"+ Create Exercise"})]})}),m&&(0,t.jsx)("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsx)("div",{className:"ml-3 text-sm text-red-700",children:m})]})}),f&&(0,t.jsx)("div",{className:"mb-6 rounded-lg bg-green-50 border border-green-200 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsx)("div",{className:"ml-3 text-sm text-green-700",children:f})]})}),p&&(0,t.jsxs)("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Create New Exercise"}),(0,t.jsxs)("form",{onSubmit:handleCreateExercise,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exercise Name *"}),(0,t.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:y.name,onChange:e=>v({...y,name:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty *"}),(0,t.jsxs)("select",{required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:y.difficulty,onChange:e=>v({...y,difficulty:e.target.value}),children:[(0,t.jsx)("option",{value:"BEGINNER",children:"Beginner"}),(0,t.jsx)("option",{value:"INTERMEDIATE",children:"Intermediate"}),(0,t.jsx)("option",{value:"ADVANCED",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,t.jsx)("input",{type:"number",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:y.duration,onChange:e=>v({...y,duration:e.target.value})})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:y.description,onChange:e=>v({...y,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,t.jsx)("textarea",{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:y.instructions,onChange:e=>v({...y,instructions:e.target.value})})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exercise Video (Optional)"}),(0,t.jsx)("input",{type:"file",accept:"video/mp4,video/quicktime,video/x-m4v",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onChange:e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r){if(r.size>20971520){g("Video file must be less than 20MB"),e.target.value="";return}j(r),g("")}}}),N&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Selected: ",N.name," (",(N.size/1024/1024).toFixed(2)," MB)"]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Supported formats: MP4, QuickTime, M4V (Max 20MB)"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Exercise"})]})]})]}),(0,t.jsx)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden",children:Array.isArray(c)&&0!==c.length?(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:c.map(e=>(0,t.jsx)("div",{className:"px-6 py-5 hover:bg-gray-50 transition-colors",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ".concat(getDifficultyColor(e.difficulty)),children:e.difficulty})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.duration&&(0,t.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.duration," minutes"]})]})})},e.id))}):(0,t.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No exercises"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new exercise."})]})})]})})}}},function(e){e.O(0,[424,8,774,888,179],function(){return e(e.s=18101)}),_N_E=e.O()}]);