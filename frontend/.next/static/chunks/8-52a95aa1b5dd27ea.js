"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{36008:function(e,r,a){a.d(r,{Z:function(){return Layout}});var t=a(85893),s=a(67294),o=a(41664),i=a.n(o),n=a(39367),l=a(44810),d=a(11163),c=a(46435);function NotificationsBell(){let[e,r]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[i,n]=(0,s.useState)([]),[l,d]=(0,s.useState)(0),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{let onDocClick=e=>{x.current&&!x.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",onDocClick),()=>document.removeEventListener("mousedown",onDocClick)},[]),(0,s.useEffect)(()=>{let e,r=!0,load=async()=>{try{o(!0);let e=await c.BT.list(),a=e.data||e,t=Array.isArray(a)?a:(null==a?void 0:a.notifications)||(null==a?void 0:a.data)||[];if(!r)return;n(t),d(t.filter(e=>!e.read).length)}catch(e){}finally{r&&o(!1)}};return load(),e=setInterval(load,3e4),()=>{r=!1,clearInterval(e)}},[]);let markRead=async e=>{try{await c.BT.markRead(e),n(r=>r.map(r=>r.id===e?{...r,read:!0}:r)),d(e=>Math.max(0,e-1))}catch(e){}},markAll=async()=>{try{await c.BT.markAll(),n(e=>e.map(e=>({...e,read:!0}))),d(0)}catch(e){}};return(0,t.jsxs)("div",{className:"relative flex-shrink-0",ref:x,children:[(0,t.jsxs)("button",{onClick:()=>r(e=>!e),className:"relative inline-flex items-center justify-center p-1.5 sm:p-2 rounded-xl hover:bg-gradient-to-br hover:from-primary-50 hover:to-accent-50 dark:hover:from-primary-900/30 dark:hover:to-accent-900/30 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all duration-300 group","aria-label":"Notifications",children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-all duration-300 group-hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),l>0&&(0,t.jsx)("span",{className:"absolute -top-0.5 -right-0.5 inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold leading-none text-white bg-red-600 rounded-full",children:l>99?"99+":l})]}),e&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border border-gray-200/50 dark:border-slate-700/50 rounded-2xl shadow-soft-lg z-50 transition-all duration-300 animate-scale-in",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 dark:border-gray-700",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 transition-colors duration-300",children:"Notifications"}),(0,t.jsx)("button",{onClick:markAll,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline transition-colors duration-300",children:"Mark all as read"})]}),(0,t.jsx)("div",{className:"max-h-80 overflow-auto",children:a?(0,t.jsx)("div",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"Loadingâ€¦"}):0===i.length?(0,t.jsx)("div",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"No notifications"}):(0,t.jsx)("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:i.map(e=>(0,t.jsx)("li",{className:"p-3 transition-colors duration-300 ".concat(e.read?"":"bg-blue-50 dark:bg-blue-900/20"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 transition-colors duration-300",children:e.title||"Notification"}),e.message&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-0.5 transition-colors duration-300",children:e.message}),e.createdAt&&(0,t.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 transition-colors duration-300",children:new Date(e.createdAt).toLocaleString()})]}),!e.read&&(0,t.jsx)("button",{onClick:()=>markRead(e.id),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline ml-2 transition-colors duration-300",children:"Mark read"})]})},e.id))})})]})]})}function Layout(e){let{children:r}=e,{user:a,logout:o}=(0,n.a)(),{theme:c,toggleTheme:x}=(0,l.F)(),m=(0,d.useRouter)(),[h,u]=(0,s.useState)(!1),p=[{href:"/dashboard",label:"Dashboard",roles:["ADMIN","PHYSIOTHERAPIST","RECEPTIONIST","PATIENT"]},{href:"/notifications",label:"Notifications",roles:["ADMIN","PHYSIOTHERAPIST","RECEPTIONIST","PATIENT"]},{href:"/patients/exercises",label:"My Exercises",roles:["PATIENT"]},{href:"/doctor/plans",label:"Doctor Plans",roles:["PHYSIOTHERAPIST"]},{href:"/doctor/patients",label:"Doctor Patients",roles:["PHYSIOTHERAPIST"]},{href:"/requests",label:"My Requests",roles:["PATIENT"]},{href:"/exercises",label:"Exercises",roles:["ADMIN","PHYSIOTHERAPIST","RECEPTIONIST"]},{href:"/therapy-plans",label:"Therapy Plans",roles:["ADMIN","PHYSIOTHERAPIST","RECEPTIONIST","PATIENT"]},{href:"/appointments",label:"Appointments",roles:["ADMIN","PHYSIOTHERAPIST","RECEPTIONIST","PATIENT"]},{href:"/admin/invoices",label:"Invoices",roles:["ADMIN","RECEPTIONIST"]},{href:"/admin/requests",label:"Requests",roles:["ADMIN","RECEPTIONIST","PHYSIOTHERAPIST"]},{href:"/admin/users",label:"Users",roles:["ADMIN"]},{href:"/admin/assignments",label:"Assignments",roles:["ADMIN"]}].filter(e=>!!a&&e.roles.includes(a.role));return(0,t.jsxs)("div",{className:"min-h-screen transition-colors duration-500",children:[(0,t.jsxs)("nav",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-md shadow-soft border-b border-gray-200/50 dark:border-slate-700/50 sticky top-0 z-50 transition-all duration-500 animate-fade-in",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] items-center h-14 sm:h-16 gap-2 lg:gap-3",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(i(),{href:"/dashboard",className:"flex items-center space-x-1 sm:space-x-1.5 text-base sm:text-lg lg:text-xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-primary-600 dark:from-primary-400 dark:via-primary-300 dark:to-primary-400 bg-clip-text text-transparent hover:from-primary-700 hover:via-primary-600 hover:to-primary-700 dark:hover:from-primary-300 dark:hover:via-primary-200 dark:hover:to-primary-300 transition-all duration-300 animate-shimmer bg-[length:200%_auto]",children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary-600 dark:text-primary-400 flex-shrink-0 transition-all duration-300 hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline text-sm lg:text-base xl:text-lg",children:"Physio Platform"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Physio"})]})}),(0,t.jsx)("div",{className:"hidden md:flex items-center min-w-0 overflow-hidden",children:(0,t.jsx)("div",{className:"flex items-center space-x-0.5 lg:space-x-0.5 xl:space-x-1 overflow-x-auto scrollbar-hide w-full",children:p.map(e=>(0,t.jsx)(i(),{href:e.href,onClick:()=>u(!1),className:"inline-flex items-center px-1 sm:px-1.5 lg:px-1.5 xl:px-2 py-1.5 lg:py-1.5 xl:py-2 rounded-lg text-[10px] lg:text-[10px] xl:text-[11px] font-medium transition-all duration-300 whitespace-nowrap flex-shrink-0 ".concat(m.pathname===e.href?"bg-gradient-to-r from-primary-100 to-primary-50 dark:from-primary-900/40 dark:to-primary-800/20 text-primary-700 dark:text-primary-300 border border-primary-300 dark:border-primary-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:bg-gradient-to-r hover:from-primary-50 hover:to-transparent dark:hover:from-primary-900/20 dark:hover:to-transparent hover:text-primary-700 dark:hover:text-primary-300 hover:scale-105"),children:e.label},e.href))})}),(0,t.jsx)("div",{className:"flex items-center justify-end space-x-1.5 lg:space-x-2 w-[240px] lg:w-[280px] xl:w-[300px] flex-shrink-0",children:a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:x,className:"relative inline-flex items-center justify-center p-1.5 sm:p-2 rounded-xl hover:bg-gradient-to-br hover:from-primary-50 hover:to-accent-50 dark:hover:from-primary-900/30 dark:hover:to-accent-900/30 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all duration-300 flex-shrink-0 group","aria-label":"Toggle theme",children:"dark"===c?(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-400 dark:text-yellow-300 transition-all duration-500 rotate-0 group-hover:rotate-180 group-hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300 transition-all duration-500 rotate-0 group-hover:rotate-12 group-hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(NotificationsBell,{})}),(0,t.jsxs)("div",{className:"hidden lg:flex flex-col items-end min-w-0 flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-50 truncate max-w-[120px] xl:max-w-[150px] transition-colors duration-300",children:a.email}),(0,t.jsx)("span",{className:"text-[10px] text-gray-600 dark:text-gray-300 transition-colors duration-300",children:a.role})]}),(0,t.jsxs)("button",{onClick:()=>{o(),m.push("/login")},className:"inline-flex items-center justify-center px-2.5 sm:px-3 lg:px-3.5 py-1.5 sm:py-2 border border-gray-300 dark:border-slate-600 rounded-lg text-xs sm:text-xs font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 hover:bg-gray-50 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-300 whitespace-nowrap flex-shrink-0",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Logout"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Out"})]}),(0,t.jsx)("button",{onClick:()=>u(!h),className:"md:hidden inline-flex items-center justify-center p-2 rounded-lg text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 hover:bg-gray-100 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-shrink-0 transition-colors","aria-label":"Toggle menu",children:h?(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})]})}),h&&a&&(0,t.jsx)("div",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 transition-colors duration-300",children:(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 max-h-[calc(100vh-4rem)] overflow-y-auto",children:[p.map(e=>(0,t.jsx)(i(),{href:e.href,onClick:()=>u(!1),className:"block px-3 py-2 rounded-lg text-base font-medium transition-colors duration-300 ".concat(m.pathname===e.href?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100"),children:e.label},e.href)),(0,t.jsx)("div",{className:"pt-2 mt-2 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"px-3 py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate transition-colors duration-300",children:a.email}),(0,t.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:a.role})]})})]})})]}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 lg:py-8 px-3 sm:px-4 lg:px-6",children:r})]})}}}]);